{
    "model_kwargs":{
        "device":"cuda",
        "vision_model_name":"resnet50",
        "language_model_name":"t5-base"

    },
    "dataset_kwargs": {
        "root_data_dir":"dataset",
        "train_annotations_json_fn": "mscoco_train2014_annotations.json",
        "train_questions_json_fn": "OpenEnded_mscoco_train2014_questions.json",
        "test_annotations_json_fn": "mscoco_val2014_annotations.json",
        "test_questions_json_fn": "OpenEnded_mscoco_val2014_questions.json",        
        "train_images_dir":"data/train_images",
        "test_images_dir":"data/val_images",
        "train_preprocessing_kwargs":{
            "resizing_width":256,
            "resizing_height":256,
            "interpolation_strategy":"bilinear_interpolation",
            "batch_size":4,
            "image_transforms":[
                "ShiftScaleRotate", 
                "RandomCrop",
                "RGBShift",
                "RandomBrightnessContrast",
                "MultiplicativeNoise",
                "Normalize", 
                "HueSaturationValue", 
                "RandomBrightnessContrast", 
                "ToTensorV2" 
        
            ],
            "language_model_name":"t5-base"
        },
        "test_preprocessing_kwargs":{
            "resizing_width":256,
            "resizing_height":256,
            "batch_size":16,
            "interpolation_strategy":"bilinear_interpolation",
            "image_transforms":[
                "ToTensorV2" 
        
            ],            
            "language_model_name":"t5-base"
        }
    },
    "trainer_kwargs": {
        "epochs": 30,
        "monitor_train": true,
        "monitor_val": true,
        "monitor_test": true,
        "device": "cuda",
        "gradient_clipping": 1.0,
        "output_dir": "trial_run_11Nov23",
        "load_from_checkpoint": true,
        "is_training": true,
        "use_cache": false,
        "first_val_epoch": 0,
        "metric_eval_mode": "strict",
        "metric_average_mode": "macro",
        "mxp_training":false,
        "loss_combination_strategy":"dynamic_weighted"        
    },

    "optimizer_kwargs": {
        "_description": "default_lr is for any layer other than lm",
        "default_lr": 0.00005,
        "type": "AdamW",
        "kwargs": {
            "weight_decay": 0.1,
            "amsgrad": true
        },
        "lm_encoder_lr": 0.0001,
        "lm_decoder_lr": 0.0001,
        "vision_lr":0.0001,
        "classifier_lr":0.001
    },

    "lr_scheduler_kwargs": {
        "_description": "linear lr scheduler with warmup and linear decay",
        "increase_batch_size_on_plateau": false,
        "num_warmup_steps": -1,
        "num_training_steps": -1,
        "max_warmup_steps": 10000
        }, 
    "callbacks_kwargs": {
        "_description": "early stopping",
        "kwargs": {
            "save_final_model": false,
            "patience": 3,
            "mode": "max",
            "threshold": 0.005
        }
    }            
}
